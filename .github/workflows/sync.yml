name: Douban to Notion Sync

on:
  schedule:
    - cron: '0 23 * * *'   # 北京时间 早上 7:00（UTC 23:00 前一天）
    - cron: '0 8 * * *'    # 北京时间 下午 16:00（UTC 8:00）
  workflow_dispatch:       # 继续支持手动触发

jobs:
  sync:
    runs-on: ubuntu-latest
    steps:
      - name: Sync 想看 (Wish/Mark)
        uses: lizheming/doumark-action@master
        with:
          id: 220107525
          type: movie
          status: mark
          format: notion
          dir: ${{ secrets.NOTION_DATABASE_ID }}
          notion_token: ${{ secrets.NOTION_TOKEN }}

      - name: Sync 正在看 (Doing)
        uses: lizheming/doumark-action@master
        with:
          id: 220107525
          type: movie
          status: doing
          format: notion
          dir: ${{ secrets.NOTION_DATABASE_ID }}
          notion_token: ${{ secrets.NOTION_TOKEN }}

      - name: Sync 看过 (Done/Collect)
        uses: lizheming/doumark-action@master
        with:
          id: 220107525
          type: movie
          status: done
          format: notion
          dir: ${{ secrets.NOTION_DATABASE_ID }}
          notion_token: ${{ secrets.NOTION_TOKEN }}
